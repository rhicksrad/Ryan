<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ryan 3D World â€“ Fallback</title>
    <link rel="stylesheet" href="../../css/styles.css" />
    <style>
      body { overflow-y: auto; }
      main { max-width: 960px; margin: 0 auto; padding: 2rem 1rem 4rem; }
      header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
      header img { width: 56px; height: 56px; }
      section { margin-bottom: 2rem; }
    </style>
  </head>
  <body>
    <main>
      <header>
        <img id="fallback-logo" alt="Ryan mark" />
        <div>
          <h1>Ryan 3D World</h1>
          <p id="tagline">Interactive portfolio islands.</p>
        </div>
      </header>
      <p id="summary">
        This fallback view provides the same information in a lightweight layout for devices without WebGL support.
      </p>
      <nav aria-label="Sections">
        <ul>
          <li><a href="#cooking">Cooking</a></li>
          <li><a href="#it">IT Lab</a></li>
          <li><a href="#gardening">Gardening</a></li>
          <li><a href="#ai">AI Hub</a></li>
          <li><a href="https://rhicksrad.github.io/8Beat" target="_blank" rel="noopener">Music</a></li>
          <li><a href="../../resume.html">Resume</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
      <section id="skills"></section>
      <section id="principles"></section>
      <section id="projects"></section>
      <section id="writing"></section>
      <section id="talks"></section>
      <section id="contact"></section>
    </main>
    <script type="module">
      import logoUrl from '../../assets/logo.svg?url';
      const logo = document.getElementById('fallback-logo');
      if (logo instanceof HTMLImageElement) {
        logo.src = logoUrl;
      }
      const summaryEl = document.getElementById('summary');
      const taglineEl = document.getElementById('tagline');
      const sections = {
        skills: document.getElementById('skills'),
        principles: document.getElementById('principles'),
        projects: document.getElementById('projects'),
        writing: document.getElementById('writing'),
        talks: document.getElementById('talks'),
        contact: document.getElementById('contact')
      };
      fetch('../../content/profile.json')
        .then((response) => response.json())
        .then((profile) => {
          taglineEl.textContent = profile.tagline;
          summaryEl.textContent = profile.summary;
          sections.skills.innerHTML = `<h2>Skills</h2><ul>${profile.skills
            .map((skill) => `<li>${skill}</li>`)
            .join('')}</ul>`;
          sections.principles.innerHTML = `<h2>Principles</h2><ul>${profile.principles
            .map((item) => `<li>${item}</li>`)
            .join('')}</ul>`;
          sections.projects.innerHTML = `<h2>Projects</h2><ul>${profile.projects
            .map((item) => `<li><a href="${item.url}">${item.title}</a></li>`)
            .join('')}</ul>`;
          sections.writing.innerHTML = `<h2>Writing</h2><ul>${profile.writing
            .map((item) => `<li><a href="${item.url}">${item.title}</a></li>`)
            .join('')}</ul>`;
          sections.talks.innerHTML = `<h2>Talks</h2><ul>${profile.talks
            .map((item) => `<li><a href="${item.url}">${item.title}</a></li>`)
            .join('')}</ul>`;
          sections.contact.innerHTML = `<h2>Contact</h2><p><a href="mailto:${profile.contact.email}">${profile.contact.email}</a></p>`;
        })
        .catch(() => {
          summaryEl.textContent = 'Offline fallback. Please check your connection to load the full experience.';
        });
    </script>
  </body>
</html>
